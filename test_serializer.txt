python manage.py shell

Python 3.12.3 (main, Apr 23 2024, 09:16:07) [GCC 13.2.1 20240417] on linux
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> # 1. Importer les modèles et sérialiseurs
>>> from users.models import User
>>> from users.serializers import UserSerializer
.venv/lib/python3.12/site-packages/requests/__init__.py:86: RequestsDependencyWarning: Unable to find acceptable character detection dependency (chardet or charset_normalizer).
  warnings.warn(
>>>
>>> # 2. Créer ou récupérer une instance de User
>>> user = User.objects.create(username='toto', password='password12345*', email='toto@example.com', age=25)
>>>
>>> # 3. Sérialiser l'instance de User
>>> serializer = UserSerializer(user)
>>> print(serializer.data)
{'id': 4, 'username': 'toto', 'email': 'toto@example.com', 'age': 25, 'can_be_contacted': False, 'can_data_be_shared': False}
>>>
>>> # 4. Désérialiser pour créer un nouvel utilisateur
>>> data = {
...     'username': 'newuser',
...     'password': 'newpassword123',
...     'email': 'newuser@example.com',
...     'age': 25,
...     'can_be_contacted': True,
...     'can_data_be_shared': False
... }
>>> serializer = UserSerializer(data=data)
>>> if serializer.is_valid():
...     new_user = serializer.save()
...     print(new_user)
... else:
...     print(serializer.errors)
...
newuser
>>>
